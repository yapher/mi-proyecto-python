{% extends 'layout.html' %}
{% block content %}
<script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts-gl@2.0.9/dist/echarts-gl.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<link rel="stylesheet" href="/static/css/apps/graficos_repuestos.css">

<h2>Gráficos de Repuestos por Estado</h2>

<label for="jerarquiaSelect">Filtrar por Ubicación Técnica:</label>
<select id="jerarquiaSelect">
    <option value="">-- Todas --</option>
    {% for jerarquia in jerarquias %}
        <option value="{{ jerarquia }}">{{ jerarquia }}</option>
    {% endfor %}
</select>

<!-- Agrupamos los gráficos para exportar todo junto -->
<div id="grafico" class="chart-container">
    <div id="graficoTorta" class="chart-box"></div>
    <div id="graficoBarras" class="chart-box"></div>
</div>

<button id="exportarPdf" class="btn btn-success">Exportar Gráficos a PDF</button>

<script>
    window.datos_iniciales = {{ datos | tojson | safe }};
</script>
<script src="/static/js/apps/graficos_repuestos.js"></script>
{% endblock %}
