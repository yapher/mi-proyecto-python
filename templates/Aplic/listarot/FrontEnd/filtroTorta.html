<!-- Modal siempre presente -->
<div class="modal fade" id="filtroTortaModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content bg-dark text-white">
            <div class="modal-header">
                <h5 class="modal-title">Órdenes del grupo "{{ grupo }}" (columna: {{ columna }})</h5>

                <a href="{{ url_for('indexlistar_ot.exportar_pdf', columna=columna, grupo=grupo, archivo=archivo) }}"
                    class="btn btn-danger ms-auto me-2" target="_blank">
                    Exportar a PDF
                </a>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                {% if ordenes %}
                    <table class="table table-dark table-striped table-sm">
                        <thead>
                            <tr>
                                {% for key in ordenes[0].keys() %}
                                    <th>{{ key }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for orden in ordenes %}
                                <tr>
                                    {% for value in orden.values() %}
                                        <td>{{ value if value != "" and value is not none else "sin valor" }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p class="text-center">No hay órdenes en este grupo.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Script para abrir el modal automáticamente -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var filtroModal = new bootstrap.Modal(document.getElementById('filtroTortaModal'));
        filtroModal.show();
    });
</script>
